<html>
<head>
<style>
  body {
    background-color: #000;
    margin: 0px;
    overflow: hidden;
  }
</style>
<script src="http://threejs.org/build/three.min.js"></script>
<script src="http://threejs.org/examples/js/controls/OrbitControls.js"></script>
<script src="js/effects/Ocean.js"></script>
<script src="js/effects/MirrorRenderer.js"></script>
<script src="js/shaders/OceanShader.js"></script>
<script src="js/shaders/FFTOceanShader.js"></script>
</head>
<body>
<script>
var mesh, renderer, scene, camera, controls;
var ground, time = 0;
var ocean;


init();
animate();

function init() {

  // renderer
  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.shadowMap.enabled = true;
  document.body.appendChild(renderer.domElement);

  // scene
  scene = new THREE.Scene();

  // camera
  camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.5, 300000);
  camera.position.set(620, 620, 1020);

  // controls
  controls = new THREE.OrbitControls(camera, renderer.domElement);

  // ambient
  scene.add(new THREE.AmbientLight(0x222222));

  // light
  var light = new THREE.DirectionalLight(0xffffff, 1, 100);
  light.position.set(700, 700, 500);
  light.castShadow = true; // default false
  light.shadow.mapSize.width = 1024;
  light.shadow.mapSize.height = 1024;
  light.shadow.camera.left = -2000;
  light.shadow.camera.right = 2000;
  light.shadow.camera.top = 2000;
  light.shadow.camera.bottom = -2000;
  light.shadow.camera.near = 0.5;
  light.shadow.camera.far = 2000;

  scene.add(light);

  var helper = new THREE.CameraHelper(light.shadow.camera);
  scene.add(helper);

  // axes
  scene.add( new THREE.AxisHelper( 20 ) );

  // ground plane
  var ground_geo = new THREE.PlaneGeometry(3000, 3000, 10, 10);
  var ground_mat = new THREE.MeshPhongMaterial({
    color: new THREE.Color(0xAAAAAA),
    shininess: 5
  });

  ground = new THREE.Mesh(ground_geo, ground_mat);
  ground.position.y = -250;
  ground.rotation.x = -1.57;
  ground.castShadow = false;
  ground.receiveShadow = true;
  scene.add(ground);


  // Initialize Ocean
  var gsize = 512;
  var res = 512;
  var gres = 256;
  var origx = -gsize / 2;
  var origz = -gsize / 2;
  ocean = new THREE.Ocean( renderer, camera, scene,
  {
    INITIAL_SIZE : 200.0,
    INITIAL_WIND : [ 10.0, 10.0 ],
    INITIAL_CHOPPINESS : 3.6,
    CLEAR_COLOR : [ 1.0, 1.0, 1.0, 0.0 ],
    SUN_DIRECTION : light.position.clone(),
    OCEAN_COLOR: new THREE.Vector3( 0.35, 0.4, 0.45 ),
    SKY_COLOR: new THREE.Vector3( 10.0, 13.0, 15.0 ),
    EXPOSURE : 0.15,
    GEOMETRY_RESOLUTION: gres,
    GEOMETRY_SIZE : gsize,
    RESOLUTION : res
  } );

  ocean.render()

}

function animate() {

  requestAnimationFrame(animate);

  //controls.update();
  // time += 0.1;
  // mesh.position.y = Math.sin(time * 0.5) * 50;
  // mesh.material.uniforms.time.value = time;

  renderer.render(scene, camera);

}

  </script>
</body>
</html>